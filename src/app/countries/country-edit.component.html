<div>
    <h1>{{ title }}</h1>
    <mat-error *ngIf="this.form.errors?.['isDupeField']">A country already exists with these details</mat-error>
    <p *ngIf="this.id && !this.country">Loading...</p>
    <form [formGroup]="this.form" (ngSubmit)="onSubmit()">
        <mat-form-field>
            <mat-label>
                Name:
            </mat-label>
            <input matInput formControlName="name" placeholder="Type a name">
            <mat-error *ngFor="let error of this.getErrors(this.form.get('name')!, 'Name')">{{ error }}</mat-error>
        </mat-form-field>

        <mat-form-field>
            <mat-label>
                ISO2:
            </mat-label>
            <input matInput formControlName="iso2" placeholder="Enter ISO2 name">
            <mat-error *ngFor="let error of this.getErrors(this.form.get('iso2')!, 'ISO2', {'pattern': 'Must be two characters long and only letters', 'isDupeField': 'Is already in use'})">{{ error }}</mat-error>
        </mat-form-field>

        <mat-form-field>
            <mat-label>
                ISO3:
            </mat-label>
            <input matInput formControlName="iso3" placeholder="Enter ISO3 name">
            <mat-error *ngFor="let error of this.getErrors(this.form.get('iso3')!, 'ISO3', {'pattern': 'Must be three characters long and only letters'})">{{ error }}</mat-error>
        </mat-form-field>

        <div>
            <button mat-flat-button color="primary" type="submit" [disabled]="this.form.invalid">{{ this.id ? 'Save' : 'Create' }}</button>
            <button mat-flat-button color="secondary" [routerLink]="['/countries']">Cancel</button>
        </div>
    </form>
</div>